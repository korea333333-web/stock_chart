name: Daily Stock Analyzer Bot

# 언제 이 봇 스크립트를 실행할 것인가?
on:
  schedule:
    # GitHub Actions의 cron은 영국 시간(UTC) 기준입니다. (한국 시간 KST = UTC + 9)
    # 평일(1-5: 월~금)에만 작동합니다.
    
    # 1. 오전 11:00 KST -> 02:00 UTC
    - cron: '0 2 * * 1-5'
    
    # 2. 오후 13:00 KST -> 04:00 UTC
    - cron: '0 4 * * 1-5'
    
    # 3. 장 마감 15:30 KST -> 06:30 UTC
    - cron: '30 6 * * 1-5'
    
  # 수동으로 버튼을 눌러서 테스트하기 위한 옵션
  workflow_dispatch: 

jobs:
  run-bot:
    runs-on: ubuntu-latest
    
    steps:
      # 1. 깃허브 저장소(코드) 가져오기
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2. 파이썬 환경 세팅
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11' 

      # 3. 필요한 라이브러리(requirements.txt) 자동 다운로드 및 설치
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # 4. 방금 만든 주식 알람 봇(bot.py) 실행!
      - name: Run Stock Bot
        run: |
          python bot.py
